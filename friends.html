<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>

<head>

    <meta charset="UTF-8">

    <title>Friends</title>



    <link rel="stylesheet" href="css/style.css" media="screen" type="text/css" />
    <link href="css/semantic.min.css" rel="stylesheet" type="text/css">
    <link href="css/custom.css" rel="stylesheet" type="text/css">
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="stylesheets/friends.css" rel="stylesheet" type="text/css">
   
    <link href="css/v2.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Pacifico' rel='stylesheet' type='text/css'>

        <link rel="stylesheet" type="text/css" href="IconHoverEffects/css/default.css" />
        <link rel="stylesheet" type="text/css" href="IconHoverEffects/css/component.css" />


    <script src="js/jquery.min.js"></script>
    <script src="https://www.parsecdn.com/js/parse-1.2.18.min.js"></script>
    <script src="js/modernizr.js"></script>
    <script src="js/semantic.min.js"></script>
    <script src="js/style.js"></script>
    <script src="js/key.js"></script>
    <script src="js/v2.js"></script>
    <script type="text/javascript" src="http://momentjs.com/downloads/moment-with-locales.js"></script>    

</head>

<body>
    <script>
            window.fbAsyncInit = function() {
                Parse.FacebookUtils.init({ // this line replaces FB.init({
                  appId      : '633858636720666', // Facebook App ID
                  status     : true,  // check Facebook Login status
                  cookie     : true,  // enable cookies to allow Parse to access the session
                  xfbml      : true,  // initialize Facebook social plugins on the page
                  version    : 'v2.2' // point to the latest Facebook Graph API version
                });
             
                // Run code after the Facebook SDK is loaded.
                var recommendfriend = function(id, url, name){
                    var friendbody = $('<div class="card" id="'+id+'"><div class="dimmable image"><div class="ui dimmer"></div><img src="'+url+'"></div><div class="content"><a class="header">'+name+'</a></div><div class="ui bottom blue attached button" id="add_friend_btn"><i class="add icon"></i>Add Friend</div></div>');
                    $('#might-interested').append(friendbody);
                }
                var friendlist = function(id, url, name){
                    var listbody = $('<div class="card" id="'+id+'"><div class="image"><img src="'+url+'"></div><div class="content"><a class="header">'+name+'</a></div></div>');
                    $('#friend-followed').append(listbody);
                }
                var logined = function(){
                    //Recommend friends section
                    var user = Parse.Object.extend('User');
                            var query = new Parse.Query(user);
                            query.find({
                                success:function(alluser){
                                    for(var i = 0; i<alluser.length; i++){
                                        if(alluser[i].id != Parse.User.current().id){
                                            var userid = alluser[i].id;
                                            var username = alluser[i].get('name');
                                            var userphotourl = alluser[i].get('imagesrc');
                                            recommendfriend(userid, userphotourl, username);
                                            var friends = Parse.User.current().get('friends');
                                            for(var j = 0; j<friends.length; j++){
                                                var friend = friends[j];
                                                var judge = $("div[id='"+friend+"']");
                                                if(judge!=null){
                                                    $('[id="'+friend+'"]').remove();
                                                }
                                            }   
                                        }
                                    }
                                }
                            })
                            //Friend list section
                            var userfriend = Parse.User.current().get('friends');
                            if(userfriend.length != 0){
                                for(var i = 0; i<userfriend.length; i++){
                                    var queryfriend = Parse.Object.extend('User');
                                    var query = new Parse.Query(queryfriend);
                                    query.equalTo('objectId', userfriend[i]);
                                    query.first({
                                        success:function(frienddata){
                                            var friendid = frienddata.id;
                                            var friendphotourl = frienddata.get('imagesrc');
                                            var friendname = frienddata.get('name');
                                            friendlist(friendid, friendphotourl, friendname);
                                        }
                                    })
                                }
                            }
                }
                if(Parse.User.current()!=null){
                    logined();
                }
              };
             
              (function(d, s, id){
                var js, fjs = d.getElementsByTagName(s)[0];
                if (d.getElementById(id)) {return;}
                js = d.createElement(s); js.id = id;
                js.src = "//connect.facebook.net/en_US/sdk.js";
                fjs.parentNode.insertBefore(js, fjs);
              }(document, 'script', 'facebook-jssdk'));
    </script>
           <div class="following bar">
        <!--mavigation-->
        <div class="ui  main menu ">
            <div class="ui page grid">
                <div class="column">
                    <div class="container">
                    <div id="left" class="left menu inverted ">
                      <a  class="item logo">
                        Modent
                      </a>
                          <a class="item" id="profile">
                            <i class="users icon"></i> Friends
                          </a>
                     </div>     
                        <!--friends page-->
                        
                        
                        <div id="right" class="right menu inverted ">
                            <a class="item" id="userphoto">
                                <img id="account_img"/>
                            </a>
                            <a class=" item account_info" id="accountinfo">

                            </a>
                            <a class="item login_btn">
                                Login
                            </a> 
                            <a class="item logout_btn">
                                Logout
                            </a>   
                        </div>
                      
                    </div>
                </div>
            </div>
        </div>
    </div>
    <header id="header_v2">
            <div class="slogan">
                Share Your Moment!

            </div>
            
            <div>
              <div class="ui inverted huge buttons">
                <div class="ui teal button btn_make_dent"><i class="write icon"></i>Make a Dent</div>
                <div class="ui  green button" id="go_to_now"><i class="angle double down icon"></i>Go To Now</div>
                
              </div>
            </div>
            <!--div class="ui huge inverted black button btn_make_dent"><i class="write icon"></i>Make a Dent!</div-->
        </header>
    <div class="profile-con">
    <!-- friends -->
        <div class="ui page grid">
            <h2 class="ui header">
                <div class="content">
                    My Friends
                    <div class="sub header">
                        Here are friends you have followed.
                    </div>
                </div>
            </h2>

            <section id="friend-followed" class="sixteen wide column">         
                <!-- <div class="friend-blocks">
                    <figure>
                        <img src="img/4.jpg"/>
                        <figcaption>
                            <span>高大為</span>
                            <p class="icon-links">
                                <a href="#"><i class="fa fa-comments-o"></i></a>
                                <a href="#"><i class="fa fa-heart-o"></i></a>
                            </p>
                        </figcaption>           
                    </figure>
                </div> -->
            </section>

            <h2 class="ui header">
                <div class="content">
                    Recommended Friends
                    <div class="sub header">
                        Here is someone you might be interestes in.
                    </div>
                </div>
            </h2>

            <section id="might-interested" class="sixteen wide column"> 
                <!-- <div class="friend-blocks">
                    <figure>
                        <img src="img/4.jpg"/>
                        <figcaption>
                            <span>高大為</span>
                            <p class="icon-links">
                                <a href="#"><i class="fa fa-comments-o"></i></a>
                                <a href="#"><i class="fa fa-heart-o"></i></a>
                            </p>
                        </figcaption>           
                    </figure>
                </div> -->
            </section>
            
        </div>
    </div>
</body>
<html>

